================================================================================
   PAPER TRADING LAUNCHER
================================================================================
Starting paper trading...
Broker: zerodha
Log file: /Users/Algo_Trading/manishsir_options/paper_trading/logs/session_log_20260109_212801.txt
Press Ctrl+C to stop
================================================================================

================================================================================
UNIVERSAL PAPER TRADING SYSTEM
================================================================================
Loading configuration...
Loading credentials from: /Users/Algo_Trading/manishsir_options/paper_trading/config/credentials_zerodha.txt
Creating broker instance...
âœ“ Broker: Zerodha

[2026-01-09 21:28:01.260119+05:30] Checking for previous session...
[2026-01-09 21:28:01.260266+05:30] No previous state found - starting fresh

[2026-01-09 21:28:01.260310+05:30] Connecting to Zerodha...
[2026-01-09 21:28:01.260358] Connecting to Zerodha...
[2026-01-09 21:28:01.461017] Generated TOTP: 770898
[2026-01-09 21:28:01.566188] âœ“ Request token extracted from redirect
[2026-01-09 21:28:01.566290] Request token obtained: 5RrkxMJvwr69DA01WZIZ...
[2026-01-09 21:28:01.623954] âœ“ Connection successful!
[2026-01-09 21:28:01.624054] Access Token: oTz98j2cDmH38ZMDYi1F...
[2026-01-09 21:28:01.624215] Zerodha data feed initialized
[2026-01-09 21:28:01.624284+05:30] âœ“ Connected to Zerodha

[2026-01-09 21:28:01.624338+05:30] Initializing new session...
[2026-01-09 21:28:01.624627+05:30] ðŸ†• First session - Starting with â‚¹100,000.00
[2026-01-09 21:28:01.625078+05:30] Session initialized: SESSION_20260109_2128
[2026-01-09 21:28:01.625119+05:30] State file: /Users/Algo_Trading/manishsir_options/paper_trading/state/trading_state_zerodha_20260109.json
[2026-01-09 21:28:01.625162+05:30] Loading instruments...
[2026-01-09 21:28:01.625194] Loading instruments...
[2026-01-09 21:28:01.625218] Fetching instruments for NFO...
[2026-01-09 21:28:02.763260] âœ“ Retrieved 40424 instruments
[2026-01-09 21:28:02.769084] Fetching instruments for NSE...
[2026-01-09 21:28:02.880777] âœ“ Retrieved 9108 instruments
[2026-01-09 21:28:02.883009] âœ“ Nifty 50 token: 256265
[2026-01-09 21:28:02.883094] âœ“ Instruments loaded
[2026-01-09 21:28:02.883134+05:30] Initializing contract manager (reading from universal cache)...
Loaded 18 options expiries from cache (cached at: 2026-01-09T12:51:36.566912)
Options lot size: 65 units per lot
âœ“ Loaded contracts from universal cache: /Users/Algo_Trading/manishsir_options/contracts_cache.json
[2026-01-09 21:28:02.883838+05:30] âœ“ Contract manager initialized
[2026-01-09 21:28:02.883886+05:30] Active Weekly Expiry: 2026-01-13 (4 days)
[2026-01-09 21:28:02.883926+05:30] Initializing paper broker...
[2026-01-09 21:28:02.884282] Paper Broker initialized with capital: â‚¹100,000.00
[2026-01-09 21:28:02.884320] Daily trade log: /Users/Algo_Trading/manishsir_options/paper_trading/logs/trades_20260109_212802.csv
[2026-01-09 21:28:02.884345] Cumulative trade log: /Users/Algo_Trading/manishsir_options/paper_trading/logs/trades_cumulative.csv
[2026-01-09 21:28:02.884374+05:30] Initializing OI analyzer...
[2026-01-09 21:28:02.884695+05:30] Initializing strategy...
[2026-01-09 21:28:02.884749] Using lot size from contract manager: 65 units/lot
[2026-01-09 21:28:02.884779] Strategy initialized
  Entry: 09:30:00 - 15:28:00
  Exit: 15:29:00 - 15:30:00
  Stop Loss: 25.0%
  Trailing Stop: 10.0%
  VWAP Stop: 5.0%
  OI Stop: 10.0%
[2026-01-09 21:28:02.885173+05:30] âœ“ All components initialized

================================================================================
[2026-01-09 21:28:02.885233+05:30] Starting DUAL-LOOP paper trading...
  Broker: Zerodha
  Loop 1: Strategy Loop - Every 5 minutes (Entry decisions)
  Loop 2: Exit Monitor Loop - Every 1 minute (LTP-based exits)
  Loop 3: Contract Monitor Loop - Every 300s (Cache updates)
================================================================================
[2026-01-09 21:28:02.885464+05:30] âœ“ Contract monitor loop started (checks every 300s)
[2026-01-09 21:28:02.885542+05:30] âœ“ Contract monitor loop started (checks every 300s)
[2026-01-09 21:28:02.885716+05:30] Market closed, waiting...
[2026-01-09 21:29:02.890561+05:30] Market closed, waiting...
[2026-01-09 21:30:02.895621+05:30] Market closed, waiting...
[2026-01-09 21:31:02.903632+05:30] Market closed, waiting...
[2026-01-09 21:32:02.907835+05:30] Market closed, waiting...
[2026-01-09 21:33:02.889123+05:30] ðŸ”„ Contract monitor: Checking for cache updates...
======================================================================
CACHE FILE UPDATED - RELOADING CONTRACTS
======================================================================
Previous mtime: 1767974245.541641
Current mtime:  1767974312.487286
Loaded 18 options expiries from cache (cached at: 2026-01-09T12:51:36.566912)
Options lot size: 20 units per lot
âœ“ Contracts reloaded successfully
  Options: 18 expiry dates
  Active Options: 2026-01-13 (4 days)
======================================================================
[2026-01-09 21:33:02.894924+05:30] âœ“ Contracts reloaded from cronjob update
[2026-01-09 21:33:02.895033+05:30] Active Weekly Expiry: 2026-01-13 (4 days)
[2026-01-09 21:33:02.915643+05:30] Market closed, waiting...
[2026-01-09 21:34:02.920654+05:30] Market closed, waiting...
[2026-01-09 21:35:02.925737+05:30] Market closed, waiting...
[2026-01-09 21:36:02.929660+05:30] Market closed, waiting...
[2026-01-09 21:37:02.935420+05:30] Market closed, waiting...
[2026-01-09 21:38:02.899125+05:30] ðŸ”„ Contract monitor: Checking for cache updates...
[2026-01-09 21:38:02.902715+05:30] âœ“ Contract check complete - No updates (Active: 2026-01-13, 4 days)
[2026-01-09 21:38:02.940554+05:30] Market closed, waiting...
[2026-01-09 21:39:02.945559+05:30] Market closed, waiting...
[2026-01-09 21:40:02.969077+05:30] Market closed, waiting...
[2026-01-09 21:41:02.974409+05:30] Market closed, waiting...
[2026-01-09 21:42:02.982286+05:30] Market closed, waiting...

/Users/Algo_Trading/manishsir_options/venv/lib/python3.9/site-packages/urllib3/__init__.py:35: NotOpenSSLWarning: urllib3 v2 only supports OpenSSL 1.1.1+, currently the 'ssl' module is compiled with 'LibreSSL 2.8.3'. See: https://github.com/urllib3/urllib3/issues/3020
  warnings.warn(

================================================================================
UNIVERSAL PAPER TRADING SYSTEM
================================================================================

Loading configuration...
Loading credentials from: paper_trading/config/credentials_zerodha.txt
Creating broker instance...
‚úì Broker: Zerodha

[2026-01-05 14:01:07.562049+05:30] Checking for previous session...
[2026-01-05 14:01:07.562344+05:30] ‚úì State loaded from paper_trading/state/trading_state_20260105.json
[2026-01-05 14:01:07.562376+05:30] Previous state found but nothing to recover - starting fresh

[2026-01-05 14:01:07.562387+05:30] Connecting to Zerodha...
[2026-01-05 14:01:07.562403] Connecting to Zerodha...
[2026-01-05 14:01:07.727344] Generated TOTP: 165608
[2026-01-05 14:01:07.810634] ‚úì Request token extracted from redirect
[2026-01-05 14:01:07.810654] Request token obtained: xbn5sB2mj6alyNknr6zc...
[2026-01-05 14:01:07.900686] ‚úì Connection successful!
[2026-01-05 14:01:07.900710] Access Token: RdeeUH04AOYW5SIxyMAY...
[2026-01-05 14:01:07.900757] Zerodha data feed initialized
[2026-01-05 14:01:07.900770+05:30] ‚úì Connected to Zerodha

[2026-01-05 14:01:07.900800+05:30] Initializing new session...
[2026-01-05 14:01:07.901402+05:30] üìä PORTFOLIO CARRYOVER
  Previous Date: 2026-01-05
  Starting Capital: ‚Çπ105,880.00
  Previous P&L: ‚Çπ+0.00
  Previous Trades: 0
  Previous Win Rate: 0.0%
[2026-01-05 14:01:07.901966+05:30] Session initialized: SESSION_20260105_1401
[2026-01-05 14:01:07.901978+05:30] State file: paper_trading/state/trading_state_20260105.json
[2026-01-05 14:01:07.902000+05:30] Loading instruments...
[2026-01-05 14:01:07.902012] Loading instruments...
[2026-01-05 14:01:07.902018] Fetching instruments for NFO...
[2026-01-05 14:01:09.067574] ‚úì Retrieved 37479 instruments
[2026-01-05 14:01:09.074936] Fetching instruments for NSE...
[2026-01-05 14:01:09.192768] ‚úì Retrieved 9107 instruments
[2026-01-05 14:01:09.196204] ‚úì Nifty 50 token: 256265
[2026-01-05 14:01:09.196223] ‚úì Instruments loaded
[2026-01-05 14:01:09.196232+05:30] Initializing paper broker...
[2026-01-05 14:01:09.196804] Paper Broker initialized with capital: ‚Çπ105,880.00
[2026-01-05 14:01:09.196818] Daily trade log: paper_trading/logs/trades_20260105_140109.csv
[2026-01-05 14:01:09.196822] Cumulative trade log: paper_trading/logs/trades_cumulative.csv
[2026-01-05 14:01:09.196832+05:30] Initializing OI analyzer...
[2026-01-05 14:01:09.197180+05:30] Initializing strategy...
[2026-01-05 14:01:09.197208] Strategy initialized
  Entry: 09:30:00 - 15:28:00
  Exit: 15:29:00 - 15:30:00
  Stop Loss: 25.0%
  Trailing Stop: 10.0%
  VWAP Stop: 5.0%
  OI Stop: 10.0%
[2026-01-05 14:01:09.197546+05:30] ‚úì All components initialized

================================================================================
[2026-01-05 14:01:09.197562+05:30] Starting DUAL-LOOP paper trading...
  Broker: Zerodha
  Loop 1: Strategy Loop - Every 5 minutes (Entry decisions)
  Loop 2: Exit Monitor Loop - Every 1 minute (LTP-based exits)
================================================================================

[2026-01-05 14:01:09.197738+05:30] ‚úì Exit monitor loop started (1-min LTP)
[2026-01-05 14:01:09.197775+05:30] ‚úì Exit monitor loop started
[2026-01-05 14:01:09.198089+05:30] ‚úì Strategy loop started

================================================================================
[2026-01-05 14:01:09.198113+05:30] STRATEGY LOOP - Processing 5-min candle...
================================================================================

[2026-01-05 14:01:09.198113+05:30] Nifty Spot: 26248.85
[2026-01-05 14:01:09.240612] Fetching quotes for 22 options...
[2026-01-05 14:01:09.281916] ‚úì Retrieved 22 option quotes

================================================================================
[2026-01-05 14:01:09.198113+05:30] ‚ö†Ô∏è  STARTED LATE (after 9:15 AM)
[2026-01-05 14:01:09.198113+05:30] Determining direction using CURRENT OI data...
[2026-01-05 14:01:09.198113+05:30] (OI buildup direction is still valid mid-day)
================================================================================


================================================================================
[2026-01-05 14:01:09.198113+05:30] NEW TRADING DAY: 2026-01-05
================================================================================

================================================================================
OI DISTRIBUTION DEBUG (Spot: 26248.85)
================================================================================

CALL OI by Strike:
Strike                  OI   Distance from Spot
--------------------------------------------------
26000.0          2,791,880            -248.85
26050.0            533,195            -198.85
26100.0          2,495,480            -148.85
26150.0          1,839,825             -98.85
26200.0          8,177,130             -48.85
26250.0         10,727,795               1.15
26300.0         28,826,590              51.15 üëà MAX
26350.0         21,358,740             101.15
26400.0         21,821,020             151.15
26450.0          9,707,880             201.15
26500.0         17,362,800             251.15

PUT OI by Strike:
Strike                  OI   Distance from Spot
--------------------------------------------------
26000.0         18,665,530             248.85
26050.0          7,566,910             198.85
26100.0         15,213,900             148.85
26150.0         11,520,860              98.85
26200.0         20,322,380              48.85 üëà MAX
26250.0         15,175,355              -1.15
26300.0         18,227,950             -51.15
26350.0          6,550,245            -101.15
26400.0          4,091,360            -151.15
26450.0            861,965            -201.15
26500.0          1,313,715            -251.15
================================================================================

[2026-01-05 14:01:09.198113+05:30] Max Call OI: 28,826,590 @ 26300.0, Max Put OI: 20,322,380 @ 26200.0
[2026-01-05 14:01:09.198113+05:30] Direction determined: PUT (Call dist: 51.15, Put dist: 48.85)
[2026-01-05 14:01:09.198113+05:30] ‚úì Daily Analysis Complete: Direction=PUT, Strike=26200.0, Expiry=2026-01-06, Spot=26248.85
[2026-01-05 14:01:09.198113+05:30] üîÑ Reset VWAP running totals for new day: 2026-01-05
[2026-01-05 14:01:09.198113+05:30] üéØ Initialized VWAP for PUT 26200.0: 58 bars from 9:15 AM
[2026-01-05 14:01:09.198113+05:30] Checking entry: PUT 26200.0, Expiry=2026-01-06
[2026-01-05 14:01:09.198113+05:30] PUT 26200.0: OI=20,322,380, Change=0 (+0.00%) - BUILDING
[2026-01-05 14:01:09.198113+05:30] PUT 26200.0: Price=‚Çπ36.90, VWAP=‚Çπ36.90 - BELOW ‚úó

--------------------------------------------------------------------------------
STATUS UPDATE
--------------------------------------------------------------------------------
Date: 2026-01-05
Broker: Zerodha
Daily Direction: PUT @ 26200.0
Open Positions: 0
Total P&L: ‚Çπ0.00
ROI: +0.00%
--------------------------------------------------------------------------------

[14:01:09] Waiting 231s for next candle at 14:05:00
